"use strict";(self.webpackChunksmm_encyclopedia=self.webpackChunksmm_encyclopedia||[]).push([[973],{2973:function(t,e,n){n.r(e),n.d(e,{default:function(){return dt}});var i=n(5671),r=n(3144),u=n(7326),o=n(136),a=n(9388),l=n(6274),s=n(9359),c=n(2791),f=n(4278),h=n(9870),v=(0,s.Z)("MAP"),d=function(){function t(e){(0,i.Z)(this,t),h.b||t.map.if((function(t){return t.includes(e)})).isMet((function(){throw new ReferenceError('A duplicate sound player was found with the same key "'.concat(e,'".'))})).set(e,this)}return(0,r.Z)(t,null,[{key:"map",get:function(){var t,e;return null!==(e=(t=(0,l.Z)(this,v))[v])&&void 0!==e?e:t[v]=new f.w}}]),t}();d.DEFAULT_DOES_LOOP=!1,Object.defineProperty(d,v,{writable:!0,value:void 0});var Z,y=n(5201),p=n(4250),g=(0,s.Z)("englishName");Z=Symbol.iterator;var b=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),r=e.call(this),Object.defineProperty((0,u.Z)(r),g,{writable:!0,value:void 0}),(0,l.Z)((0,u.Z)(r),g)[g]=t,r}return(0,r.Z)(n,[{key:"englishName",get:function(){return(0,l.Z)(this,g)[g]}},{key:"englishNameInHtml",get:function(){return this.englishName}},{key:"_static",get:function(){return n}}],[{key:"getValueByName",value:function(t){return(0,p.l4)(t,this)}},{key:"getValue",value:function(t){return y.xs.getValueOn(this,t)}},{key:"values",get:function(){return y.xs.getValuesOn(this)}},{key:Z,value:function(){return this.values[Symbol.iterator]()}}]),n}(y.xs);b.STANDBY=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"getElementsFrom",value:function(t){return[(0,t.playElement)()]}}]),n}(b))("standby"),b.PAUSED=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"getElementsFrom",value:function(t){var e=t.playElement,n=t.stopElement;return[e(),n()]}}]),n}(b))("paused"),b.PLAYING=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"getElementsFrom",value:function(t){var e=t.pauseElement,n=t.stopElement;return[e(),n()]}}]),n}(b))("playing"),b.LOADING=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"getElementsFrom",value:function(t){return[(0,t.loadingElement)()]}}]),n}(b))("loading"),b.EXCEPTION=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"getElementsFrom",value:function(t){return[(0,t.exceptionElement)()]}}]),n}(b))("exception");var k,P=(0,s.Z)("state"),O=(0,s.Z)("isLoading"),w=function(){function t(e,n){(0,i.Z)(this,t),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),(0,l.Z)(this,P)[P]=e instanceof t?e.state:e,(0,l.Z)(this,O)[O]=n instanceof t?n.isLoading:n}return(0,r.Z)(t,[{key:"state",get:function(){return(0,l.Z)(this,P)[P]}},{key:"isLoading",get:function(){return(0,l.Z)(this,O)[O]}},{key:"equals",value:function(e){return null!=e&&(e instanceof t&&(this.state===e.state&&this.isLoading===e.isLoading))}}]),t}(),S=(0,s.Z)("history"),m=(0,s.Z)("last"),E=(0,s.Z)("current"),A=function(){function t(e){if((0,i.Z)(this,t),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),e===b.LOADING)throw new ReferenceError("The first state of the history cannot be the loading state!");(0,l.Z)(this,E)[E]=new w(e,!1),(0,l.Z)(this,S)[S]=[this.current]}return(0,r.Z)(t,[{key:"history",get:function(){return(0,l.Z)(this,S)[S]}},{key:"_history",get:function(){return(0,l.Z)(this,S)[S]}},{key:"current",get:function(){return(0,l.Z)(this,E)[E]},set:function(t){null!=t&&this.setLast(this.current)._history.push((0,l.Z)(this,E)[E]=t)}},{key:"setCurrent",value:function(t){return this.current=t,this}},{key:"last",get:function(){if(null==(0,l.Z)(this,m)[m])throw new ReferenceError("The history has no last state!");return(0,l.Z)(this,m)[m]},set:function(t){if(null==t)throw new TypeError("The last state could not be set to a null value.");(0,l.Z)(this,m)[m]=t}},{key:"setLast",value:function(t){return this.last=t,this}}]),t}(),j=b.STANDBY,L=b.PAUSED,N=b.PLAYING,C=b.EXCEPTION,_=(0,s.Z)("source"),B=(0,s.Z)("title"),D=(0,s.Z)("doesLoop"),x=(0,s.Z)("history"),T=(0,s.Z)("audio"),F=(0,s.Z)("isDurationValid"),V=(0,s.Z)("onBeforePlay"),Y=(0,s.Z)("onAfterPlay"),I=(0,s.Z)("onPlaying"),R=(0,s.Z)("onBeforePause"),U=(0,s.Z)("onAfterPause"),G=(0,s.Z)("onBeforeStop"),M=(0,s.Z)("onAfterStop"),X=(0,s.Z)("onEnd"),q=(0,s.Z)("onBeforeStateChanged"),H=(0,s.Z)("onAfterStateChanged"),W=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.DEFAULT_DOES_LOOP;return(0,i.Z)(this,n),o=e.call(this,t.key),Object.defineProperty((0,u.Z)(o),_,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),B,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),D,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),x,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),T,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),F,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),V,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),Y,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),I,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),R,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),U,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),G,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),M,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),X,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),q,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(o),H,{writable:!0,value:void 0}),(0,l.Z)((0,u.Z)(o),_)[_]=t,(0,l.Z)((0,u.Z)(o),B)[B]=r,(0,l.Z)((0,u.Z)(o),D)[D]=a,o.setState(((0,l.Z)((0,u.Z)(o),x)[x]=new A(j)).current),o}return(0,r.Z)(n,[{key:"source",get:function(){return(0,l.Z)(this,_)[_]}},{key:"title",get:function(){return(0,l.Z)(this,B)[B]}},{key:"doesLoop",get:function(){return(0,l.Z)(this,D)[D]}},{key:"history",get:function(){return(0,l.Z)(this,x)[x]}},{key:"audio",get:function(){var t=this;if(null==(0,l.Z)(this,T)[T]){var e=(0,l.Z)(this,T)[T]=new Audio(this.source.fullName);e.onplaying=function(e){var n;switch(t.history.current.state){case j:return t.stop();case L:return t.pause()}t.setState(new w(N,!1)),null===(n=t.onPlaying)||void 0===n||n.call(t,t,e)},e.onended=function(e){var n;t.setState(new w(j,!1)),null===(n=t.onEnd)||void 0===n||n.call(t,t,e)},e.title=this.title,e.loop=this.doesLoop}return(0,l.Z)(this,T)[T]}},{key:"isAudioExistant",get:function(){return null!=(0,l.Z)(this,T)[T]}},{key:"isPaused",get:function(){var t,e;return null!==(t=null===(e=(0,l.Z)(this,T)[T])||void 0===e?void 0:e.paused)&&void 0!==t&&t}},{key:"isDurationValid",get:function(){if(null==(0,l.Z)(this,F)[F]){if(!this.isAudioExistant)return!1;(0,l.Z)(this,F)[F]=Number.isFinite(this.audio.duration)}return(0,l.Z)(this,F)[F]}},{key:"onBeforePlay",get:function(){var t;return null!==(t=(0,l.Z)(this,V)[V])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,V)[V]=null!==t&&void 0!==t?t:null}},{key:"setOnBeforePlay",value:function(t){return this.onBeforePlay=t,this}},{key:"onAfterPlay",get:function(){var t;return null!==(t=(0,l.Z)(this,Y)[Y])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,Y)[Y]=null!==t&&void 0!==t?t:null}},{key:"setOnAfterPlay",value:function(t){return this.onAfterPlay=t,this}},{key:"onPlaying",get:function(){var t;return null!==(t=(0,l.Z)(this,I)[I])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,I)[I]=null!==t&&void 0!==t?t:null}},{key:"setOnPlaying",value:function(t){return this.onPlaying=t,this}},{key:"onBeforePause",get:function(){var t;return null!==(t=(0,l.Z)(this,R)[R])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,R)[R]=null!==t&&void 0!==t?t:null}},{key:"setOnBeforePause",value:function(t){return this.onBeforePause=t,this}},{key:"onAfterPause",get:function(){var t;return null!==(t=(0,l.Z)(this,U)[U])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,U)[U]=null!==t&&void 0!==t?t:null}},{key:"setOnAfterPause",value:function(t){return this.onAfterPause=t,this}},{key:"onBeforeStop",get:function(){var t;return null!==(t=(0,l.Z)(this,G)[G])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,G)[G]=null!==t&&void 0!==t?t:null}},{key:"setOnBeforeStop",value:function(t){return this.onBeforeStop=t,this}},{key:"onAfterStop",get:function(){var t;return null!==(t=(0,l.Z)(this,M)[M])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,M)[M]=null!==t&&void 0!==t?t:null}},{key:"setOnAfterStop",value:function(t){return this.onAfterStop=t,this}},{key:"onEnd",get:function(){var t;return null!==(t=(0,l.Z)(this,X)[X])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,X)[X]=null!==t&&void 0!==t?t:null}},{key:"setOnEnd",value:function(t){return this.onEnd=t,this}},{key:"onBeforeStateChanged",get:function(){var t;return null!==(t=(0,l.Z)(this,q)[q])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,q)[q]=null!==t&&void 0!==t?t:null}},{key:"setOnBeforeStateChanged",value:function(t){return this.onBeforeStateChanged=t,this}},{key:"onAfterStateChanged",get:function(){var t;return null!==(t=(0,l.Z)(this,H)[H])&&void 0!==t?t:null},set:function(t){(0,l.Z)(this,H)[H]=null!==t&&void 0!==t?t:null}},{key:"setOnAfterStateChanged",value:function(t){return this.onAfterStateChanged=t,this}},{key:"play",value:function(){var t,e,n=this,i=this.history.current;return i.isLoading?this.setState(new w(N,!0)):(i.state===N||(null===(t=this.onBeforePlay)||void 0===t||t.call(this,this),this.audio.play().then((function(){return n.isDurationValid?n:n.setState(new w(C,!1))})).catch((function(){return n.setState(new w(C,!1))})),this.setState(new w(N,!0)),null===(e=this.onAfterPlay)||void 0===e||e.call(this,this)),this)}},{key:"pause",value:function(){var t,e,n=this.history.current,i=n.isLoading,r=n.state===L;if(!i||!r){if(i)return this.setState(new w(L,!0));if(r)return this}return null===(t=this.onBeforePause)||void 0===t||t.call(this,this),this.audio.pause(),this.setState(new w(L,!1)),null===(e=this.onAfterPause)||void 0===e||e.call(this,this),this}},{key:"stop",value:function(){var t,e,n=this.history.current,i=n.isLoading,r=n.state===j;if(!i||!r){if(i)return this.setState(new w(j,!0));if(r)return this}null===(t=this.onBeforeStop)||void 0===t||t.call(this,this);var u=this.audio;return u.pause(),u.currentTime=0,this.setState(new w(j,!1)),null===(e=this.onAfterStop)||void 0===e||e.call(this,this),this}},{key:"setState",value:function(t){var e,n,i=this.history,r=i.current;return r.equals(t)||(null===(e=this.onBeforeStateChanged)||void 0===e||e.call(this,this,t,r),i.current=t,null===(n=this.onAfterStateChanged)||void 0===n||n.call(this,this,t,r)),this}}]),n}(d),z=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,null,[{key:"createSimple",value:function(t,e,n){return new W(t,e,null!==n&&void 0!==n?n:d.DEFAULT_DOES_LOOP)}}]),t}(),J=(0,s.Z)("playElement"),K=(0,s.Z)("pauseElement"),Q=(0,s.Z)("stopElement"),$=(0,s.Z)("loadingElement"),tt=(0,s.Z)("exceptionElement"),et=function(){function t(e,n,r,u,o){(0,i.Z)(this,t),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:void 0}),(0,l.Z)(this,J)[J]=e,(0,l.Z)(this,K)[K]=n,(0,l.Z)(this,Q)[Q]=r,(0,l.Z)(this,$)[$]=u,(0,l.Z)(this,tt)[tt]=o}return(0,r.Z)(t,[{key:"playElement",get:function(){return(0,l.Z)(this,J)[J]}},{key:"pauseElement",get:function(){return(0,l.Z)(this,K)[K]}},{key:"stopElement",get:function(){return(0,l.Z)(this,Q)[Q]}},{key:"loadingElement",get:function(){return(0,l.Z)(this,$)[$]}},{key:"exceptionElement",get:function(){return(0,l.Z)(this,tt)[tt]}}]),t}(),nt=(0,s.Z)("englishName");k=Symbol.iterator;var it=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),r=e.call(this),Object.defineProperty((0,u.Z)(r),nt,{writable:!0,value:void 0}),(0,l.Z)((0,u.Z)(r),nt)[nt]=t,r}return(0,r.Z)(n,[{key:"englishName",get:function(){return(0,l.Z)(this,nt)[nt]}},{key:"englishNameInHtml",get:function(){return this.englishName}},{key:"onCreate",value:function(t){}},{key:"onPlay",value:function(t){return null}},{key:"_static",get:function(){return n}}],[{key:"getValueByName",value:function(t){return(0,p.l4)(t,this)}},{key:"default",get:function(){return y.xs.getDefaultOn(this)},set:function(t){this.setDefault(t)}},{key:"setDefault",value:function(t){return y.xs.setDefaultOn(this,t)}},{key:"getValue",value:function(t){return y.xs.getValueOn(this,t)}},{key:"values",get:function(){return y.xs.getValuesOn(this)}},{key:k,value:function(){return this.values[Symbol.iterator]()}}]),n}(y.xs);it.ALL_YES=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"onCreate",value:function(t){t(!0)}},{key:"onPlay",value:function(t){return t(!0),!0}}]),n}(it))("all yes"),it.ALL_NO=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"onCreate",value:function(t){t(!1)}},{key:"onPlay",value:function(t){return t(!1),!1}}]),n}(it))("all no"),it.ON_PLAY_ONLY=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"onPlay",value:function(t){return t(),null}}]),n}(it))("on play only"),it.ON_CREATE_ONLY=new(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"onCreate",value:function(t){t()}}]),n}(it))("on create only"),it._DEFAULT=it.ON_PLAY_ONLY;var rt=n(184),ut=b.STANDBY,ot=b.LOADING,at=(0,s.Z)("PLAY_CLASSES"),lt=(0,s.Z)("PAUSE_CLASSES"),st=(0,s.Z)("STOP_CLASSES"),ct=(0,s.Z)("LOADING_CLASSES"),ft=(0,s.Z)("EXCEPTION_CLASSES"),ht=(0,s.Z)("audio"),vt=(0,s.Z)("isSourceFoundCallback"),dt=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),r=e.call(this,t),Object.defineProperty((0,u.Z)(r),ht,{writable:!0,value:void 0}),Object.defineProperty((0,u.Z)(r),vt,{writable:!0,value:void 0}),r.state={state:new w(ut,!1),isSourceRetrieved:!1},(0,l.Z)((0,u.Z)(r),vt)[vt]=function(t){r._audio.isDurationValid;r.setState({isSourceRetrieved:!0})},r}return(0,r.Z)(n,[{key:"file",get:function(){return this.props.file}},{key:"title",get:function(){return this.props.title}},{key:"validator",get:function(){var t;return null!==(t=this.props.validator)&&void 0!==t?t:it.default}},{key:"componentState",get:function(){return this.state.state}},{key:"isSourceRetrieved",get:function(){return this.state.isSourceRetrieved}},{key:"_audio",get:function(){var t=this;if(null==(0,l.Z)(this,ht)[ht]){var e=this.file;(0,l.Z)(this,ht)[ht]=z.createSimple(e,this.title).setOnBeforePlay((function(){return t.validator.onPlay((0,l.Z)(t,vt)[vt])})).setOnAfterStateChanged((function(e){return t.setState({state:e.history.current})}))}return(0,l.Z)(this,ht)[ht]}},{key:"componentDidMount",value:function(){this.isSourceRetrieved||this.validator.onCreate((0,l.Z)(this,vt)[vt])}},{key:"componentWillUnmount",value:function(){var t=(0,l.Z)(this,ht)[ht];null!=t&&(t.setState(new w(ut,!1)),d.map.remove(t.source.key))}},{key:"render",value:function(){var t=this,e=new et((function(){return(0,rt.jsx)("div",{className:(0,l.Z)(n,at)[at],onClick:function(){return t._audio.play()}},"".concat(t.title," - play"))}),(function(){return(0,rt.jsx)("div",{className:(0,l.Z)(n,lt)[lt],onClick:function(){return t._audio.pause()}},"".concat(t.title," - pause"))}),(function(){return(0,rt.jsx)("div",{className:(0,l.Z)(n,st)[st],onClick:function(){return t._audio.stop()}},"".concat(t.title," - stop"))}),(function(){return(0,rt.jsx)("div",{className:(0,l.Z)(n,ct)[ct],role:"status"},"".concat(t.title," - loading"))}),(function(){return(0,rt.jsx)("div",{className:(0,l.Z)(n,ft)[ft]},"".concat(t.title," - exception"))})),i=this.componentState;return(0,rt.jsxs)("div",{className:"audio-state-container container",children:[i.isLoading?ot.getElementsFrom(e):null,i.state.getElementsFrom(e)]},"".concat(this.title," - container"))}}]),n}(c.Component);Object.defineProperty(dt,at,{writable:!0,value:"btn btn-lg bi-play-btn-fill audio-state audio-state-play"}),Object.defineProperty(dt,lt,{writable:!0,value:"btn btn-lg bi-pause-btn-fill audio-state audio-state-pause"}),Object.defineProperty(dt,st,{writable:!0,value:"btn btn-lg bi-stop-btn-fill audio-state audio-state-stop"}),Object.defineProperty(dt,ct,{writable:!0,value:"spinner-border audio-state audio-state-loading"}),Object.defineProperty(dt,ft,{writable:!0,value:"bi-shield-fill-exclamation audio-state audio-state-exception"})}}]);
//# sourceMappingURL=973.7118f734.chunk.js.map