"use strict";(self.webpackChunksmm_encyclopedia=self.webpackChunksmm_encyclopedia||[]).push([[819],{24819:(t,e,i)=>{i.d(e,{Z:()=>ft});var n=i(66274),s=i(99359),r=i(72791),l=(0,s.Z)("state"),a=(0,s.Z)("isLoading"),o=(0,s.Z)("isFromEventDirectly");class u{constructor(t,e,i){Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),(0,n.Z)(this,l)[l]=t instanceof u?t.state:t,(0,n.Z)(this,a)[a]=e instanceof u?e.isLoading:e,(0,n.Z)(this,o)[o]=i instanceof u?i.isFromEventDirectly:i}get state(){return(0,n.Z)(this,l)[l]}get isLoading(){return(0,n.Z)(this,a)[a]}get isFromEventDirectly(){return(0,n.Z)(this,o)[o]}equals(t){return null!=t&&(t instanceof u&&(this.state===t.state&&this.isLoading===t.isLoading&&this.isFromEventDirectly===t.isFromEventDirectly))}}var h=(0,s.Z)("playElement"),d=(0,s.Z)("pauseElement"),c=(0,s.Z)("stopElement"),v=(0,s.Z)("loadingElement"),p=(0,s.Z)("exceptionElement");class f{constructor(t,e,i,s,r){Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n.Z)(this,h)[h]=t,(0,n.Z)(this,d)[d]=e,(0,n.Z)(this,c)[c]=i,(0,n.Z)(this,v)[v]=s,(0,n.Z)(this,p)[p]=r}get playElement(){return(0,n.Z)(this,h)[h]}get pauseElement(){return(0,n.Z)(this,d)[d]}get stopElement(){return(0,n.Z)(this,c)[c]}get loadingElement(){return(0,n.Z)(this,v)[v]}get exceptionElement(){return(0,n.Z)(this,p)[p]}}var Z=i(19870),y=(0,s.Z)("map");class P{constructor(t){if(!Z.b){const e=P.map;if(e.has(t))throw new ReferenceError('A duplicate sound player was found with the same key "'.concat(t,'".'));e.set(t,this)}}static get map(){var t,e;return null!==(e=(t=(0,n.Z)(this,y))[y])&&void 0!==e?e:t[y]=new Map}}P.DEFAULT_DOES_LOOP=!1,Object.defineProperty(P,y,{writable:!0,value:void 0});var b,g,E,w=i(56787),m=i(77844),S=(0,s.Z)("englishName");class O extends w.Enum{constructor(t){super(),Object.defineProperty(this,S,{writable:!0,value:void 0}),(0,n.Z)(this,S)[S]=t}get englishName(){return(0,n.Z)(this,S)[S]}get englishNameInHtml(){return this.englishName}}b=O,O.STANDBY=new class extends b{getElementsFrom(t){let{playElement:e}=t;return[e()]}}("standby"),O.PAUSED=new class extends b{getElementsFrom(t){let{playElement:e,stopElement:i}=t;return[e(),i()]}}("paused"),O.PLAYING=new class extends b{getElementsFrom(t){let{pauseElement:e,stopElement:i}=t;return[e(),i()]}}("playing"),O.LOADING=new class extends b{getElementsFrom(t){let{loadingElement:e}=t;return[e()]}}("loading"),O.EXCEPTION=new class extends b{getElementsFrom(t){let{exceptionElement:e}=t;return[e()]}}("exception"),O.CompanionEnum=(E=(0,s.Z)("instance"),g=class t extends m.S{constructor(){super(b)}static get get(){var e,i;return null!==(i=(e=(0,n.Z)(this,E))[E])&&void 0!==i?i:e[E]=new t}},Object.defineProperty(g,E,{writable:!0,value:void 0}),g);var A=(0,s.Z)("history"),j=(0,s.Z)("last"),L=(0,s.Z)("current");class C{constructor(t){if(Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),t===O.LOADING)throw new ReferenceError("The first state of the history cannot be the loading state!");(0,n.Z)(this,L)[L]=new u(t,!1,!1),(0,n.Z)(this,A)[A]=[this.current]}get history(){return(0,n.Z)(this,A)[A]}get _history(){return(0,n.Z)(this,A)[A]}get current(){return(0,n.Z)(this,L)[L]}set current(t){null!=t&&(this.last=this.current,this._history.push((0,n.Z)(this,L)[L]=t))}setCurrent(t){return this.current=t,this}get last(){if(null==(0,n.Z)(this,j)[j])throw new ReferenceError("The history has no last state!");return(0,n.Z)(this,j)[j]}set last(t){if(null==t)throw new TypeError("The last state could not be set to a null value.");(0,n.Z)(this,j)[j]=t}setLast(t){return this.last=t,this}}const{STANDBY:N,PAUSED:x,PLAYING:_,EXCEPTION:B}=O;var D,F,T,Y=(0,s.Z)("source"),k=(0,s.Z)("title"),I=(0,s.Z)("doesLoop"),R=(0,s.Z)("history"),U=(0,s.Z)("audio"),G=(0,s.Z)("isDurationValid"),V=(0,s.Z)("onBeforePlay"),X=(0,s.Z)("onAfterPlay"),q=(0,s.Z)("onBeforePause"),H=(0,s.Z)("onAfterPause"),M=(0,s.Z)("onBeforeStop"),W=(0,s.Z)("onAfterStop"),z=(0,s.Z)("onBeforeStateChanged"),J=(0,s.Z)("onAfterStateChanged"),K=(0,s.Z)("onPlayEvent"),Q=(0,s.Z)("onPlayingEvent"),$=(0,s.Z)("onPauseEvent"),tt=(0,s.Z)("onEndEvent");class et extends P{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P.DEFAULT_DOES_LOOP;super(t.key),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:void 0}),(0,n.Z)(this,Y)[Y]=t,(0,n.Z)(this,k)[k]=e,(0,n.Z)(this,I)[I]=i,this.setState(((0,n.Z)(this,R)[R]=new C(N)).current)}get source(){return(0,n.Z)(this,Y)[Y]}get title(){return(0,n.Z)(this,k)[k]}get doesLoop(){return(0,n.Z)(this,I)[I]}get history(){return(0,n.Z)(this,R)[R]}get audio(){if(null!=(0,n.Z)(this,U)[U])return(0,n.Z)(this,U)[U];const t=new Audio(this.source.fullName);return t.onplaying=t=>{var e;switch(this.history.current.state){case N:return this.stop();case x:return this.pause()}this.setState(new u(_,!1,!0)),null===(e=this.onPlayingEvent)||void 0===e||e.call(this,this,t)},t.onpause=t=>{var e;this.history.current.state!==N&&this.setState(new u(x,!1,!0)),null===(e=this.onPauseEvent)||void 0===e||e.call(this,this,t)},t.onplay=t=>{var e;this.setState(new u(_,!0,!0)),null===(e=this.onPlayEvent)||void 0===e||e.call(this,this,t)},t.onended=t=>{var e;this.setState(new u(N,!1,!0)),null===(e=this.onEndEvent)||void 0===e||e.call(this,this,t)},t.title=this.title,t.loop=this.doesLoop,(0,n.Z)(this,U)[U]=t}get isAudioExistant(){return null!=(0,n.Z)(this,U)[U]}get isPaused(){var t,e;return null!==(t=null===(e=(0,n.Z)(this,U)[U])||void 0===e?void 0:e.paused)&&void 0!==t&&t}get isDurationValid(){return null!=(0,n.Z)(this,G)[G]?(0,n.Z)(this,G)[G]:!!this.isAudioExistant&&((0,n.Z)(this,G)[G]=Number.isFinite(this.audio.duration))}get onBeforePlay(){var t;return null!==(t=(0,n.Z)(this,V)[V])&&void 0!==t?t:null}set onBeforePlay(t){(0,n.Z)(this,V)[V]=null!==t&&void 0!==t?t:null}setOnBeforePlay(t){return this.onBeforePlay=t,this}get onAfterPlay(){var t;return null!==(t=(0,n.Z)(this,X)[X])&&void 0!==t?t:null}set onAfterPlay(t){(0,n.Z)(this,X)[X]=null!==t&&void 0!==t?t:null}setOnAfterPlay(t){return this.onAfterPlay=t,this}get onBeforePause(){var t;return null!==(t=(0,n.Z)(this,q)[q])&&void 0!==t?t:null}set onBeforePause(t){(0,n.Z)(this,q)[q]=null!==t&&void 0!==t?t:null}setOnBeforePause(t){return this.onBeforePause=t,this}get onAfterPause(){var t;return null!==(t=(0,n.Z)(this,H)[H])&&void 0!==t?t:null}set onAfterPause(t){(0,n.Z)(this,H)[H]=null!==t&&void 0!==t?t:null}setOnAfterPause(t){return this.onAfterPause=t,this}get onBeforeStop(){var t;return null!==(t=(0,n.Z)(this,M)[M])&&void 0!==t?t:null}set onBeforeStop(t){(0,n.Z)(this,M)[M]=null!==t&&void 0!==t?t:null}setOnBeforeStop(t){return this.onBeforeStop=t,this}get onAfterStop(){var t;return null!==(t=(0,n.Z)(this,W)[W])&&void 0!==t?t:null}set onAfterStop(t){(0,n.Z)(this,W)[W]=null!==t&&void 0!==t?t:null}setOnAfterStop(t){return this.onAfterStop=t,this}get onBeforeStateChanged(){var t;return null!==(t=(0,n.Z)(this,z)[z])&&void 0!==t?t:null}set onBeforeStateChanged(t){(0,n.Z)(this,z)[z]=null!==t&&void 0!==t?t:null}setOnBeforeStateChanged(t){return this.onBeforeStateChanged=t,this}get onAfterStateChanged(){var t;return null!==(t=(0,n.Z)(this,J)[J])&&void 0!==t?t:null}set onAfterStateChanged(t){(0,n.Z)(this,J)[J]=null!==t&&void 0!==t?t:null}setOnAfterStateChanged(t){return this.onAfterStateChanged=t,this}get onPlayingEvent(){var t;return null!==(t=(0,n.Z)(this,Q)[Q])&&void 0!==t?t:null}set onPlayingEvent(t){(0,n.Z)(this,Q)[Q]=null!==t&&void 0!==t?t:null}setOnPlayingEvent(t){return this.onPlayingEvent=t,this}get onPlayEvent(){var t;return null!==(t=(0,n.Z)(this,K)[K])&&void 0!==t?t:null}set onPlayEvent(t){(0,n.Z)(this,K)[K]=null!==t&&void 0!==t?t:null}setOnPlayEvent(t){return this.onPlayEvent=t,this}get onPauseEvent(){var t;return null!==(t=(0,n.Z)(this,$)[$])&&void 0!==t?t:null}set onPauseEvent(t){(0,n.Z)(this,$)[$]=null!==t&&void 0!==t?t:null}setOnPauseEvent(t){return this.onPauseEvent=t,this}get onEndEvent(){var t;return null!==(t=(0,n.Z)(this,tt)[tt])&&void 0!==t?t:null}set onEndEvent(t){(0,n.Z)(this,tt)[tt]=null!==t&&void 0!==t?t:null}setOnEndEvent(t){return this.onEndEvent=t,this}play(){var t,e;const i=this.history.current;if(i.isLoading)return this.setState(new u(_,!0,!1));if(i.state===_)return this;null===(t=this.onBeforePlay)||void 0===t||t.call(this,this);return this.audio.play().then((()=>this.isDurationValid?this:this.setState(new u(B,!1,!1)))).catch((()=>this.setState(new u(B,!1,!1)))),this.setState(new u(_,!0,!1)),null===(e=this.onAfterPlay)||void 0===e||e.call(this,this),this}pause(){var t,e;const i=this.history.current,n=i.isLoading,s=i.state===x;if(!n||!s){if(n)return this.setState(new u(x,!0,!1));if(s)return this}return null===(t=this.onBeforePause)||void 0===t||t.call(this,this),this.audio.pause(),this.setState(new u(x,!1,!1)),null===(e=this.onAfterPause)||void 0===e||e.call(this,this),this}stop(){var t,e;const i=this.history.current,n=i.isLoading,s=i.state===N;if(!n||!s){if(n)return this.setState(new u(N,!0,!1));if(s)return this}null===(t=this.onBeforeStop)||void 0===t||t.call(this,this);const r=this.audio;return r.pause(),r.currentTime=0,this.setState(new u(N,!1,!1)),null===(e=this.onAfterStop)||void 0===e||e.call(this,this),this}setState(t){var e,i;const n=this.history,s=n.current;return s.equals(t)||(null===(e=this.onBeforeStateChanged)||void 0===e||e.call(this,this,t,s),n.current=t,null===(i=this.onAfterStateChanged)||void 0===i||i.call(this,this,t,s)),this}}class it{static createSimple(t,e,i){return new et(t,e,null!==i&&void 0!==i?i:P.DEFAULT_DOES_LOOP)}}var nt=(0,s.Z)("englishName");class st extends w.Enum{constructor(t){super(),Object.defineProperty(this,nt,{writable:!0,value:void 0}),(0,n.Z)(this,nt)[nt]=t}get englishName(){return(0,n.Z)(this,nt)[nt]}get englishNameInHtml(){return this.englishName}onCreate(t){}onPlay(t){return null}}D=st,st.ALL_YES=new class extends D{onCreate(t){t(!0)}onPlay(t){return t(!0),!0}}("all yes"),st.ALL_NO=new class extends D{onCreate(t){t(!1)}onPlay(t){return t(!1),!1}}("all no"),st.ON_PLAY_ONLY=new class extends D{onPlay(t){return t(),null}}("on play only"),st.ON_CREATE_ONLY=new class extends D{onCreate(t){t()}}("on create only"),st.CompanionEnum=(T=(0,s.Z)("instance"),F=class t extends m.S{constructor(){super(D),this._DEFAULT=D.ON_PLAY_ONLY}static get get(){var e,i;return null!==(i=(e=(0,n.Z)(this,T))[T])&&void 0!==i?i:e[T]=new t}},Object.defineProperty(F,T,{writable:!0,value:void 0}),F);var rt=i(80184);const{STANDBY:lt,LOADING:at}=O;var ot=(0,s.Z)("PLAY_CLASSES"),ut=(0,s.Z)("PAUSE_CLASSES"),ht=(0,s.Z)("STOP_CLASSES"),dt=(0,s.Z)("LOADING_CLASSES"),ct=(0,s.Z)("EXCEPTION_CLASSES"),vt=(0,s.Z)("audio"),pt=(0,s.Z)("isSourceFoundCallback");class ft extends r.Component{constructor(t){super(t),Object.defineProperty(this,vt,{writable:!0,value:void 0}),Object.defineProperty(this,pt,{writable:!0,value:void 0}),this.state={state:new u(lt,!1,!1),isSourceRetrieved:!1},(0,n.Z)(this,pt)[pt]=t=>{this._audio.isDurationValid;this.setState({isSourceRetrieved:!0})}}get file(){return this.props.file}get title(){return this.props.title}get validator(){var t;return null!==(t=this.props.validator)&&void 0!==t?t:st.CompanionEnum.get.defaultValue}get componentState(){return this.state.state}get isSourceRetrieved(){return this.state.isSourceRetrieved}get _audio(){if(null!=(0,n.Z)(this,vt)[vt])return(0,n.Z)(this,vt)[vt];const t=this.file;return(0,n.Z)(this,vt)[vt]=it.createSimple(t,this.title).setOnBeforePlay((()=>this.validator.onPlay((0,n.Z)(this,pt)[pt]))).setOnAfterStateChanged((t=>this.setState({state:t.history.current})))}componentDidMount(){this.isSourceRetrieved||this.validator.onCreate((0,n.Z)(this,pt)[pt])}componentWillUnmount(){const t=(0,n.Z)(this,vt)[vt];null!=t&&(t.setState(new u(lt,!1,!1)),P.map.delete(t.source.key))}render(){const t=new f((()=>(0,rt.jsx)("div",{className:(0,n.Z)(ft,ot)[ot],onClick:()=>this._audio.play()},"".concat(this.title," - play"))),(()=>(0,rt.jsx)("div",{className:(0,n.Z)(ft,ut)[ut],onClick:()=>this._audio.pause()},"".concat(this.title," - pause"))),(()=>(0,rt.jsx)("div",{className:(0,n.Z)(ft,ht)[ht],onClick:()=>this._audio.stop()},"".concat(this.title," - stop"))),(()=>(0,rt.jsx)("div",{className:(0,n.Z)(ft,dt)[dt],role:"status"},"".concat(this.title," - loading"))),(()=>(0,rt.jsx)("div",{className:(0,n.Z)(ft,ct)[ct]},"".concat(this.title," - exception")))),e=this.componentState;return(0,rt.jsxs)("div",{className:"audio-state-container container",children:[e.isLoading?at.getElementsFrom(t):null,e.state.getElementsFrom(t)]},"".concat(this.title," - container"))}}Object.defineProperty(ft,ot,{writable:!0,value:"btn btn-lg bi-play-btn-fill audio-state audio-state-play"}),Object.defineProperty(ft,ut,{writable:!0,value:"btn btn-lg bi-pause-btn-fill audio-state audio-state-pause"}),Object.defineProperty(ft,ht,{writable:!0,value:"btn btn-lg bi-stop-btn-fill audio-state audio-state-stop"}),Object.defineProperty(ft,dt,{writable:!0,value:"spinner-border audio-state audio-state-loading"}),Object.defineProperty(ft,ct,{writable:!0,value:"bi-shield-fill-exclamation audio-state audio-state-exception"})}}]);
//# sourceMappingURL=819.8c8b48aa.chunk.js.map