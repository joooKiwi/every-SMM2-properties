var be=o=>{throw TypeError(o)};var Te=(o,e,t)=>e.has(o)||be("Cannot "+t);var r=(o,e,t)=>(Te(o,e,"read from private field"),t?t.call(o):e.get(o)),l=(o,e,t)=>e.has(o)?be("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),i=(o,e,t,n)=>(Te(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t);import{ad as d,ae as Se,v as Me,r as p,j as u,c as C,m as Ae,u as ke,af as De}from"./index-DVkXFDDB.js";var O,B,j,T,S,M,A,k,D,R,V,w,$,F,I,Y,G,W,X,U,q,z,H,J,K,Q,Z,ee,te,ne,se,ae,oe,re,ie,le,ue,he,de,ce,ge;class Re{constructor(e,t){l(this,O);l(this,B);l(this,j);l(this,T);l(this,S);l(this,M);l(this,A);l(this,k);l(this,D);l(this,R);l(this,V);l(this,w);l(this,$);l(this,F);l(this,I);l(this,Y);l(this,G);l(this,W);l(this,X);l(this,U);l(this,q);l(this,z);l(this,H);l(this,J);l(this,K);l(this,Q);l(this,Z);l(this,ee);l(this,te);l(this,ne);l(this,se);l(this,ae);l(this,oe);l(this,re);l(this,ie);l(this,le);l(this,ue);l(this,he);l(this,de);l(this,ce);l(this,ge);i(this,O,e),i(this,B,t),i(this,T,!1),i(this,S,!1)}get file(){return r(this,O)}get title(){return r(this,B)}get audio(){const e=r(this,j);if(e!=null)return e;this._isLoading=!0;const t=this.file,n=new Audio(t.fullName);return n.addEventListener("playing",i(this,Z,a=>{var s;return(s=this.onPlayingEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("canplay",i(this,te,a=>{var s;return(s=this.onCanPlayEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("canplay",i(this,ee,()=>this._isLoading=!1),Se),n.addEventListener("canplaythrough",i(this,ne,a=>{var s;return(s=this.onCanPlayThroughEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("play",i(this,se,a=>{var s;return(s=this.onPlayEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("pause",i(this,ae,a=>{var s;return(s=this.onPauseEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("ended",i(this,oe,a=>{var s;return(s=this.onEndedEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("ratechange",i(this,re,a=>{var s;return(s=this.onPlaybackRateChangedEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("timeupdate",i(this,ie,a=>{var s;return(s=this.onTimeChangedEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("volumechange",i(this,le,a=>{var s;return(s=this.onVolumeChangedEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("loadstart",i(this,ue,a=>{var s;return(s=this.onLoadStartEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("progress",i(this,he,a=>{var s;return(s=this.onLoadProgressEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("loadeddata",i(this,de,a=>{var s;return(s=this.onLoadedDataEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("loadedmetadata",i(this,ce,a=>{var s;return(s=this.onLoadedMetadataEvent)==null?void 0:s.call(this,this,a)}),d),n.addEventListener("error",i(this,ge,a=>this._onExceptionCaught(a)),d),n.title=this.title,this._hasBeenLoaded=!0,i(this,j,n)}get _audio(){return r(this,j)??null}get hasBeenLoaded(){return r(this,S)}get _hasBeenLoaded(){return r(this,S)}set _hasBeenLoaded(e){i(this,S,e)}get isLoading(){return r(this,T)}get _isLoading(){return r(this,T)}set _isLoading(e){i(this,T,e)}get hasValidDuration(){const e=r(this,M);if(e!=null)return e;const t=this._audio;return t==null?!1:i(this,M,Number.isFinite(t.duration))}get isMuted(){var e;return((e=this._audio)==null?void 0:e.muted)??!1}get isPaused(){var e;return((e=this._audio)==null?void 0:e.paused)??!1}get doesLoop(){var e;return((e=this._audio)==null?void 0:e.loop)??!1}get isAtTheEnd(){var e;return((e=this._audio)==null?void 0:e.ended)??!1}get currentTime(){var e;return((e=this._audio)==null?void 0:e.currentTime)??Number.NaN}set currentTime(e){const t=this._audio;t!=null&&(t.currentTime=e)}get totalTime(){var e;return((e=this._audio)==null?void 0:e.duration)??Number.NaN}get volume(){var e;return((e=this._audio)==null?void 0:e.volume)??Number.NaN}get onBeforePlay(){return r(this,A)??null}set onBeforePlay(e){i(this,A,e??null)}setOnBeforePlay(e){return this.onBeforePlay=e,this}get onAfterPlay(){return r(this,k)??null}set onAfterPlay(e){i(this,k,e??null)}setOnAfterPlay(e){return this.onAfterPlay=e,this}get onBeforePause(){return r(this,D)??null}set onBeforePause(e){i(this,D,e??null)}setOnBeforePause(e){return this.onBeforePause=e,this}get onAfterPause(){return r(this,R)??null}set onAfterPause(e){i(this,R,e??null)}setOnAfterPause(e){return this.onAfterPause=e,this}get onBeforeStop(){return r(this,V)??null}set onBeforeStop(e){i(this,V,e??null)}setOnBeforeStop(e){return this.onBeforeStop=e,this}get onAfterStop(){return r(this,w)??null}set onAfterStop(e){i(this,w,e??null)}setOnAfterStop(e){return this.onAfterStop=e,this}get onExceptionCaught(){return r(this,$)??null}set onExceptionCaught(e){i(this,$,e??null)}setOnExceptionCaught(e){return this.onExceptionCaught=e,this}get onPlayingEvent(){return r(this,F)??null}set onPlayingEvent(e){i(this,F,e??null)}setOnPlayingEvent(e){return this.onPlayingEvent=e,this}get onCanPlayEvent(){return r(this,I)??null}set onCanPlayEvent(e){i(this,I,e??null)}setOnCanPlayEvent(e){return this.onCanPlayEvent=e,this}get onCanPlayThroughEvent(){return r(this,Y)??null}set onCanPlayThroughEvent(e){i(this,Y,e??null)}setOnCanPlayThroughEvent(e){return this.onCanPlayThroughEvent=e,this}get onPlayEvent(){return r(this,G)??null}set onPlayEvent(e){i(this,G,e??null)}setOnPlayEvent(e){return this.onPlayEvent=e,this}get onPauseEvent(){return r(this,W)??null}set onPauseEvent(e){i(this,W,e??null)}setOnPauseEvent(e){return this.onPauseEvent=e,this}get onEndedEvent(){return r(this,X)??null}set onEndedEvent(e){i(this,X,e??null)}setOnEndedEvent(e){return this.onEndedEvent=e,this}get onPlaybackRateChangedEvent(){return r(this,U)??null}set onPlaybackRateChangedEvent(e){i(this,U,e??null)}setOnPlaybackRateChangedEvent(e){return this.onPlaybackRateChangedEvent=e,this}get onTimeChangedEvent(){return r(this,q)??null}set onTimeChangedEvent(e){i(this,q,e??null)}setOnTimeChangedEvent(e){return this.onTimeChangedEvent=e,this}get onVolumeChangedEvent(){return r(this,z)??null}set onVolumeChangedEvent(e){i(this,z,e??null)}setOnVolumeChangedEvent(e){return this.onVolumeChangedEvent=e,this}get onLoadStartEvent(){return r(this,H)??null}set onLoadStartEvent(e){i(this,H,e??null)}setOnLoadStartEvent(e){return this.onLoadStartEvent=e,this}get onLoadProgressEvent(){return r(this,J)??null}set onLoadProgressEvent(e){i(this,J,e??null)}setOnLoadProgressEvent(e){return this.onLoadProgressEvent=e,this}get onLoadedDataEvent(){return r(this,K)??null}set onLoadedDataEvent(e){i(this,K,e??null)}setOnLoadedDataEvent(e){return this.onLoadedDataEvent=e,this}get onLoadedMetadataEvent(){return r(this,Q)??null}set onLoadedMetadataEvent(e){i(this,Q,e??null)}setOnLoadedMetadataEvent(e){return this.onLoadedMetadataEvent=e,this}play(){var e,t;return(e=this.onBeforePlay)==null||e.call(this,this),this.audio.play().then(()=>this._handleDurationValidity()).catch(n=>{n.name==="AbortError"&&this.isPaused||this._onExceptionCaught(n)}),(t=this.onAfterPlay)==null||t.call(this,this),this}pause(){var e,t;return(e=this.onBeforePause)==null||e.call(this,this),this.audio.pause(),(t=this.onAfterPause)==null||t.call(this,this),this}stop(){var e,t;return(e=this.onBeforeStop)==null||e.call(this,this),this.audio.pause(),this.currentTime=0,(t=this.onAfterStop)==null||t.call(this,this),this}removeEvents(){const e=this._audio;if(e==null)return this;const t=r(this,Z);t!=null&&e.removeEventListener("playing",t,d);const n=r(this,ee);n!=null&&e.removeEventListener("canplay",n,Se);const a=r(this,te);a!=null&&e.removeEventListener("canplay",a,d);const s=r(this,ne);s!=null&&e.removeEventListener("canplaythrough",s,d);const h=r(this,se);h!=null&&e.removeEventListener("play",h,d);const g=r(this,ae);g!=null&&e.removeEventListener("pause",g,d);const E=r(this,oe);E!=null&&e.removeEventListener("ended",E,d);const m=r(this,re);m!=null&&e.removeEventListener("ratechange",m,d);const y=r(this,ie);y!=null&&e.removeEventListener("timeupdate",y,d);const v=r(this,le);v!=null&&e.removeEventListener("volumechange",v,d);const f=r(this,ue);f!=null&&e.removeEventListener("loadstart",f,d);const c=r(this,he);c!=null&&e.removeEventListener("progress",c,d);const P=r(this,de);P!=null&&e.removeEventListener("loadeddata",P,d);const L=r(this,ce);L!=null&&e.removeEventListener("loadedmetadata",L,d);const x=r(this,ge);return x!=null&&e.removeEventListener("error",x,d),this}_handleDurationValidity(){if(!this.hasBeenLoaded||this.hasValidDuration)return;const e=this.file;this._onExceptionCaught(`The duration of the element “${e.fullName}” (${e.key}) is invalid!`)}_onExceptionCaught(e){var t;(t=this.onExceptionCaught)==null||t.call(this,this,e)}}O=new WeakMap,B=new WeakMap,j=new WeakMap,T=new WeakMap,S=new WeakMap,M=new WeakMap,A=new WeakMap,k=new WeakMap,D=new WeakMap,R=new WeakMap,V=new WeakMap,w=new WeakMap,$=new WeakMap,F=new WeakMap,I=new WeakMap,Y=new WeakMap,G=new WeakMap,W=new WeakMap,X=new WeakMap,U=new WeakMap,q=new WeakMap,z=new WeakMap,H=new WeakMap,J=new WeakMap,K=new WeakMap,Q=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,se=new WeakMap,ae=new WeakMap,oe=new WeakMap,re=new WeakMap,ie=new WeakMap,le=new WeakMap,ue=new WeakMap,he=new WeakMap,de=new WeakMap,ce=new WeakMap,ge=new WeakMap;const Ce=new Map;function Ve(o){return Ce.has(o)?Ce.get(o):null}function we(o,e){return Ce.has(o)?(console.warn(`A duplicate sound player was found with the same key “${o.key}”.`),Ce.get(o)):new Re(o,e)}const $e=Me.EMPTY_STRING;function qe({file:o,title:e}){p.useEffect(()=>()=>{const c=Ve(o);c!=null&&c.removeEvents()},[o,e]);const[t,n]=p.useState(!1),[a,s]=p.useState(!1),h=p.useMemo(()=>we(o,e),[o,e]),[g,E]=p.useState(!1),[m,y]=p.useState(null),[v,f]=p.useState(null);return h.setOnExceptionCaught(()=>n(!0)).setOnLoadStartEvent(()=>s(!0)).setOnLoadedDataEvent(()=>s(!1)).setOnPlayingEvent(()=>E(!0)).setOnCanPlayEvent(c=>f(c.totalTime)).setOnPauseEvent(()=>E(!1)).setOnTimeChangedEvent(c=>y(c.currentTime)),t?u.jsx("div",{className:"standalone-sound text-center bg-dark bg-opacity-75 rounded",children:u.jsx(Ie,{})}):a?u.jsxs("div",{className:"standalone-sound text-center bg-dark bg-opacity-75 rounded",children:[u.jsx(Fe,{}),u.jsx(_e,{soundPlayer:h})]}):m==null||v==null?u.jsx("div",{className:"standalone-sound text-center bg-dark bg-opacity-75 rounded",children:u.jsx(Ne,{soundPlayer:h})}):g?u.jsxs("div",{className:"standalone-sound text-center bg-dark bg-opacity-75 rounded",children:[u.jsx(_e,{soundPlayer:h}),u.jsx(je,{soundPlayer:h}),u.jsx(Oe,{current:m,setCurrent:c=>h.currentTime=c,total:v})]}):u.jsxs("div",{className:"standalone-sound text-center bg-dark bg-opacity-75 rounded",children:[u.jsx(Ne,{soundPlayer:h}),u.jsx(je,{soundPlayer:h}),u.jsx(Oe,{current:m,setCurrent:c=>h.currentTime=c,total:v})]})}function Fe(){const o=C.c(1);let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=u.jsx("div",{role:"status",className:"spinner-border spinner-border-sm text-primary",children:u.jsx(Ae,{content:ke("Loading"),className:"visually-hidden"})}),o[0]=e):e=o[0],e}function Ie(){const o=C.c(1);let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=u.jsx("i",{className:"text-danger bi-shield-fill-exclamation"}),o[0]=e):e=o[0],e}function Ne(o){const e=C.c(2),{soundPlayer:t}=o;let n;return e[0]!==t?(n=u.jsx("button",{type:"button",className:"play-button btn btn-lg bi-play-fill p-0 border-0",onClick:()=>t.play()}),e[0]=t,e[1]=n):n=e[1],n}function _e(o){const e=C.c(2),{soundPlayer:t}=o;let n;return e[0]!==t?(n=u.jsx("button",{type:"button",className:"pause-button btn btn-lg bi-pause-fill p-0 border-0",onClick:()=>t.pause()}),e[0]=t,e[1]=n):n=e[1],n}function je(o){const e=C.c(2),{soundPlayer:t}=o;let n;return e[0]!==t?(n=u.jsx("button",{type:"button",className:"stop-button btn btn-lg bi-stop-fill p-0 border-0",onClick:()=>t.stop()}),e[0]=t,e[1]=n):n=e[1],n}function Oe(o){const e=C.c(10),{current:t,setCurrent:n,total:a}=o;let s;e[0]!==t||e[1]!==a?(s=u.jsx(Ye,{current:t,total:a}),e[0]=t,e[1]=a,e[2]=s):s=e[2];let h;e[3]!==t||e[4]!==n||e[5]!==a?(h=u.jsx(Ge,{current:t,setCurrent:n,total:a}),e[3]=t,e[4]=n,e[5]=a,e[6]=h):h=e[6];let g;return e[7]!==s||e[8]!==h?(g=u.jsxs("div",{className:"controls-container pb-2",children:[s,h]}),e[7]=s,e[8]=h,e[9]=g):g=e[9],g}function Ye(o){const e=C.c(13),{current:t,total:n}=o,a=Math.floor(t/60),s=t%60;let h;e[0]!==s?(h=s.toFixed(1),e[0]=s,e[1]=h):h=e[1];const g=h,E=Math.floor(n/60),m=n%60;let y;e[2]!==m?(y=m.toFixed(1),e[2]=m,e[3]=y):y=e[3];const v=y;let f;e[4]!==a||e[5]!==g?(f=a===0?u.jsx("small",{className:"text-light me-1",children:g}):Number(g)<10?u.jsxs("small",{className:"text-light me-1",children:[a,":0",g]}):u.jsxs("small",{className:"text-light me-1",children:[a,":",g]}),e[4]=a,e[5]=g,e[6]=f):f=e[6];let c;e[7]!==E||e[8]!==v?(c=E===0?u.jsx("small",{className:"text-light",children:v}):Number(v)<10?u.jsxs("small",{className:"text-light",children:[E,":0",v]}):u.jsxs("small",{className:"text-light",children:[E,":",v]}),e[7]=E,e[8]=v,e[9]=c):c=e[9];let P;return e[10]!==f||e[11]!==c?(P=u.jsxs("div",{className:"timeRange-container d-flex justify-content-between px-1 mb-1",children:[f,c]}),e[10]=f,e[11]=c,e[12]=P):P=e[12],P}function Ge(o){const e=C.c(30),{current:t,setCurrent:n,total:a}=o,s=p.useRef(null),[h,g]=p.useState(!1),[E,m]=p.useState(null),y=t/a*100;let v;e[0]!==y?(v=y.toFixed(2),e[0]=y,e[1]=v):v=e[1];const f=Number(v),c=`progressBar-container${h||E!=null?" with-user-movement":$e} d-flex align-items-center bg-light bg-opacity-50 rounded mx-2`,P=`${f}%`;let L;e[2]!==P?(L={"--progress-percentage":P},e[2]=P,e[3]=L):L=e[3];let x;e[4]!==n||e[5]!==a?(x=b=>Be(n,a,s.current,b),e[4]=n,e[5]=a,e[6]=x):x=e[6];let ve;e[7]===Symbol.for("react.memo_cache_sentinel")?(ve=()=>g(!0),e[7]=ve):ve=e[7];let N;e[8]!==h||e[9]!==n||e[10]!==a?(N=b=>{h&&Be(n,a,s.current,b)},e[8]=h,e[9]=n,e[10]=a,e[11]=N):N=e[11];let Ee,fe,me;e[12]===Symbol.for("react.memo_cache_sentinel")?(me=()=>g(!1),Ee=()=>g(!1),fe=b=>m(b.targetTouches.item(0).identifier),e[12]=Ee,e[13]=fe,e[14]=me):(Ee=e[12],fe=e[13],me=e[14]);let _;e[15]!==E||e[16]!==n||e[17]!==a?(_=b=>{E!=null&&We(n,a,s.current,E,b)},e[15]=E,e[16]=n,e[17]=a,e[18]=_):_=e[18];let ye,Pe,pe,Le;e[19]===Symbol.for("react.memo_cache_sentinel")?(ye=()=>m(null),Pe=()=>m(null),pe=u.jsx("div",{className:"progressBar-line bg-light rounded"}),Le=u.jsx("i",{className:"current-progress small text-light bi bi-circle-fill"}),e[19]=ye,e[20]=Pe,e[21]=pe,e[22]=Le):(ye=e[19],Pe=e[20],pe=e[21],Le=e[22]);let xe;return e[23]!==_||e[24]!==c||e[25]!==L||e[26]!==x||e[27]!==N||e[28]!==f?(xe=u.jsxs("div",{ref:s,className:c,role:"progressbar","aria-valuemin":0,"aria-valuenow":f,"aria-valuemax":100,style:L,onClick:x,onMouseDown:ve,onMouseMove:N,onMouseUp:me,onMouseLeave:Ee,onTouchStart:fe,onTouchMove:_,onTouchEnd:ye,onTouchCancel:Pe,children:[pe,Le]}),e[23]=_,e[24]=c,e[25]=L,e[26]=x,e[27]=N,e[28]=f,e[29]=xe):xe=e[29],xe}function Be(o,e,t,n){t!=null&&o(e*(n.pageX-t.offsetLeft)/t.clientWidth)}function We(o,e,t,n,a){if(t==null)return;const s=De(a.touches,n);s!=null&&o(e*(s.pageX-t.offsetLeft)/t.clientWidth)}export{qe as S};
